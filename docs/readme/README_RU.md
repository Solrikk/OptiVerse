![Logo](https://github.com/Solrikk/OptiVerse/blob/main/assets/OpenCV%20-%20result/bee.jpg)

<div align="center">
  <h3>
    <a href="https://github.com/Solrikk/OptiVerse/blob/main/README.md">English</a> |
    <a href="https://github.com/Solrikk/OptiVerse/blob/main/docs/readme/README_RU.md">‚≠êRussian‚≠ê</a> |
    <a href="https://github.com/Solrikk/OptiVerse/blob/main/docs/readme/README_GE.md">German</a> |
    <a href="https://github.com/Solrikk/OptiVerse/blob/main/docs/readme//README_JP.md">Japanese</a> |
    <a href="https://github.com/Solrikk/OptiVerse/blob/main/docs/readme/README_KR.md">Korean</a> |
    <a href="https://github.com/Solrikk/OptiVerse/blob/main/docs/readme/README_CN.md">Chinese</a>
  </h3>
</div>

-----------------

# OptiVerse

OptiVerse ‚Äî —ç—Ç–æ –º–æ—â–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ, –æ–±—ä–µ–¥–∏–Ω—è—é—â–µ–µ –ø–µ—Ä–µ–¥–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è –∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è. –° –ø–æ–º–æ—â—å—é OptiVerse –≤—ã –º–æ–∂–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞—Ç—å –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ, –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –ª–∏—Ü–∞ –∏ –ø–æ–∑—ã, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã, –∞ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è—Ç—å —Å—É–±—Ç–∏—Ç—Ä—ã –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∫ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞–º.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫—É –∏–∑ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞.
- **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ**: –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ä–µ—á—å –∏–∑ –∞—É–¥–∏–æ –≤ —Ç–µ–∫—Å—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ Whisper –æ—Ç OpenAI.
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü**: –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ª–∏—Ü–∞ –∏–∑ –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞ –≤–∏–¥–µ–æ.
- **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–æ–∑**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–∑—ã –∏ –∫–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏ —Ç–µ–ª–∞ —Å –ø–æ–º–æ—â—å—é MediaPipe.
- **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å YOLOv5 –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∫–∞–¥—Ä–µ.
- **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç —Å—É–±—Ç–∏—Ç—Ä—ã –Ω–∞ –≤–∏–¥–µ–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.
- **–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ –æ–≤–µ—Ä–ª–µ–∏**: –î–æ–±–∞–≤–ª—è–µ—Ç —Ä–∞–º–∫–∏ –≤–æ–∫—Ä—É–≥ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –ª–∏—Ü –∏ –æ–±—ä–µ–∫—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–∑—ã –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã.
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –≤–∏–¥–µ–æ —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –ª–∏—Ü–∞ –∏ –æ–±—ä–µ–∫—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/your-username/OptiVerse.git
    cd OptiVerse
    ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # –î–ª—è Linux/Mac
    venv\Scripts\activate     # –î–ª—è Windows
    ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r requirements.txt
    ```
    
    **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –≤–∫–ª—é—á–∞—è `torch`, `whisper`, `ffmpeg`, `opencv-python`, `mediapipe`, –∏ `yolov5`.

4. **–°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å YOLOv5:**
    ```bash
    git clone https://github.com/ultralytics/yolov5.git
    ```
    
    –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –º–æ–¥–µ–ª–∏ `yolov5l.pt` –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ –≤ –∫–æ–¥–µ.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –≤–∏–¥–µ–æ—Ñ–∞–π–ª:**
    –ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤–∏–¥–µ–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å, –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `main()`:
    ```python
    video_path = '–≤–∞—à–µ_–≤–∏–¥–µ–æ.mp4'
    ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:**
    ```bash
    python optiverse.py
    ```

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
    - –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –≤–∏–¥–µ–æ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –ø–æ–¥ –∏–º–µ–Ω–µ–º `output_with_faces_and_pose_and_subtitles.mp4`.
    - –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –ª–∏—Ü–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `extracted_faces`.
    - –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `extracted_object`.
    - –°—É–±—Ç–∏—Ç—Ä—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª–µ `subtitles.txt`.

# üîß –î–µ—Ç–∞–ª—å–Ω–æ–µ –û–ø–∏—Å–∞–Ω–∏–µ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

OptiVerse –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞–±–æ—Ä –ø–µ—Ä–µ–¥–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ–±–∑–æ—Ä –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –≤—ã–¥–µ–ª—è—é—â–∏–π –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–æ—Ä–º—É–ª—ã.

## 1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ê—É–¥–∏–æ (`extract_audio`)**

–§—É–Ω–∫—Ü–∏—è `extract_audio` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `ffmpeg` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∞—É–¥–∏–æ–ø–æ—Ç–æ–∫–∞ –∏–∑ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ –≤ —Ñ–æ—Ä–º–∞—Ç WAV –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –≤–∫–ª—é—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª—é–±—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è.

## 2. **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –ê—É–¥–∏–æ (`transcribe_audio`)**

–ò—Å–ø–æ–ª—å–∑—É—è –º–æ–¥–µ–ª—å Whisper –æ—Ç OpenAI, —Ñ—É–Ω–∫—Ü–∏—è `transcribe_audio` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏–∑–≤–ª–µ—á—ë–Ω–Ω–æ–µ –∞—É–¥–∏–æ –≤ —Ç–µ–∫—Å—Ç. –ù–∞–¥—ë–∂–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ Whisper –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Ç–æ—á–Ω—ã–µ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ —Å –≤–∏–¥–µ–æ. –ü—Ä–æ—Ü–µ—Å—Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –º–æ–∂–Ω–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø–∏—Å–∞—Ç—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–æ–≤**, –≥–¥–µ –≤—Ö–æ–¥–Ω—ã–µ –∞—É–¥–∏–æ –ø—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤.

**–§–æ—Ä–º—É–ª–∞ –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞:**

\[
\text{Attention}(Q, K, V) = \text{softmax}\left(\frac{QK^\top}{\sqrt{d_k}}\right)V
\]

–ì–¥–µ:
- \( Q \) = –ú–∞—Ç—Ä–∏—Ü–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (Query)
- \( K \) = –ú–∞—Ç—Ä–∏—Ü–∞ –∫–ª—é—á–µ–π (Key)
- \( V \) = –ú–∞—Ç—Ä–∏—Ü–∞ –∑–Ω–∞—á–µ–Ω–∏–π (Value)
- \( d_k \) = –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–≤—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤

–≠—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –≤–Ω–∏–º–∞–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–æ–¥–µ–ª–∏ –≤–∑–≤–µ—à–∏–≤–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —á–∞—Å—Ç–µ–π –≤—Ö–æ–¥–Ω–æ–≥–æ –∞—É–¥–∏–æ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

## 3. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ –ó–∞—Ö–≤–∞—Ç –õ–∏—Ü (`detect_and_capture_faces`)**

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞—Å–∫–∞–¥–æ–≤ –•–∞–∞—Ä–∞ –∏–∑ OpenCV –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ª–∏—Ü –∏–∑ –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞ –≤–∏–¥–µ–æ. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–¥—Ä–æ–≤ –≤ –≥—Ä–∞–¥–∞—Ü–∏—è—Ö —Å–µ—Ä–æ–≥–æ —É–ª—É—á—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è. –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ª–∏—Ü–∞ –≤—ã–¥–µ–ª—è—é—Ç—Å—è —Ä–∞–º–∫–∞–º–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –±—É–¥—É—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü.

**–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ö–∞—Å–∫–∞–¥–æ–≤ –•–∞–∞—Ä–∞:**

–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–∏ –•–∞–∞—Ä–∞ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ (–ª–∏—Ü) –ø—É—Ç–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∞—Å—à—Ç–∞–±–∞—Ö –∏ –ø–æ–∑–∏—Ü–∏—è—Ö.

**–†–∞—Å—á—ë—Ç –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–≥–æ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**

\[
\text{Integral Image}(x, y) = \sum_{i=0}^{x} \sum_{j=0}^{y} I(i, j)
\]

–ì–¥–µ \( I(i, j) \) ‚Äî –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –ø–∏–∫—Å–µ–ª—è –≤ –ø–æ–∑–∏—Ü–∏–∏ \( (i, j) \).

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –≤—ã—á–∏—Å–ª—è—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–∏ –•–∞–∞—Ä–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü.

## 4. **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ü–æ–∑ (`detect_pose_on_frame`)**

–ò—Å–ø–æ–ª—å–∑—É—è —Ä–µ—à–µ–Ω–∏–µ Pose –æ—Ç MediaPipe, —Ñ—É–Ω–∫—Ü–∏—è `detect_pose_on_frame` –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏ —Ç–µ–ª–∞ –≤ –∫–∞–∂–¥–æ–º –∫–∞–¥—Ä–µ –≤–∏–¥–µ–æ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑—ã —á–µ–ª–æ–≤–µ–∫–∞ –ø—É—Ç–µ–º –Ω–∞–ª–æ–∂–µ–Ω–∏—è —Å–∫–µ–ª–µ—Ç–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ –≤–∏–¥–µ–æ, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –æ–±–ª–∞—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–≤–∏–∂–µ–Ω–∏–π, —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–≥–æ —Ç—Ä–µ–Ω–∏–Ω–≥–∞ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏.

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ö–ª—é—á–µ–≤—ã—Ö –¢–æ—á–µ–∫:**

MediaPipe –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä, –≤–∫–ª—é—á–∞—é—â–∏–π:
1. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –õ–µ–Ω–¥–º–∞—Ä–∫–æ–≤:** –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏ —Ç–µ–ª–∞.
2. **–û—Ü–µ–Ω–∫–∞ –ü–æ–∑—ã:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ª–µ–Ω–¥–º–∞—Ä–∫–∞–º–∏.

**–ü—Ä–∏–º–µ—Ä –§–æ—Ä–º—É–ª—ã –¥–ª—è –†–∞—Å—á—ë—Ç–∞ –£–≥–ª–∞ –°—É—Å—Ç–∞–≤–∞:**

\[
\theta = \arccos\left(\frac{\mathbf{u} \cdot \mathbf{v}}{\|\mathbf{u}\| \|\mathbf{v}\|}\right)
\]

–ì–¥–µ \( \mathbf{u} \) –∏ \( \mathbf{v} \) ‚Äî –≤–µ–∫—Ç–æ—Ä—ã, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–µ –∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏, –∞ \( \theta \) ‚Äî —É–≥–æ–ª –º–µ–∂–¥—É –Ω–∏–º–∏.

## 5. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –°—É–±—Ç–∏—Ç—Ä–æ–≤ (`add_subtitles`)**

–§—É–Ω–∫—Ü–∏—è `add_subtitles` –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ –≤–∏–¥–µ–æ –ø—É—Ç–µ–º –Ω–∞–ª–æ–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—É–±—Ç–∏—Ç—Ä–æ–≤. –û–Ω–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ç–æ—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–∏–∑–Ω–µ—Å—ë–Ω–Ω–æ–π –∞—É–¥–∏–æ. –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.

**–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –í—Ä–µ–º–µ–Ω–Ω—ã—Ö –ú–µ—Ç–æ–∫:**

\[
\text{Subtitle Time Window} = [t_{\text{start}}, t_{\text{end}}]
\]

–°—É–±—Ç–∏—Ç—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤–∏–¥–µ–æ \( t \) —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—é:

\[
t_{\text{start}} \leq t \leq t_{\text{end}}
\]

## 6. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö –õ–∏—Ü (`save_faces`)**

–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ª–∏—Ü–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `extracted_faces` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—é—Ç –Ω–æ–º–µ—Ä –∫–∞–¥—Ä–∞ –∏ –∏–Ω–¥–µ–∫—Å –ª–∏—Ü–∞. –¢–∞–∫–∞—è –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±–ª–µ–≥—á–∞–µ—Ç –¥–∞–ª—å–Ω–µ–π—à–µ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –ª–∏—Ü –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –∞–Ω–∞–ª–∏–∑–∞.

**–ö–æ–Ω–≤–µ–Ω—Ü–∏—è –ò–º–µ–Ω–æ–≤–∞–Ω–∏—è –§–∞–π–ª–æ–≤:**

\[
\text{filename} = \text{"frame\_"} + \text{frame\_count} + \text{"\_face\_"} + \text{face\_index} + \text{".png"}
\]

## 7. **–†–∞–∑–º–µ—â–µ–Ω–∏–µ –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –õ–∏—Ü –Ω–∞ –ö–∞–¥—Ä–µ (`place_detected_faces`)**

–î–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∑—é–º–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –ª–∏—Ü, —Ñ—É–Ω–∫—Ü–∏—è `place_detected_faces` –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–∏—Ü –Ω–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–µ–æ–∫–∞–¥—Ä–∞. –ü—É—Ç—ë–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ç–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤–∏–¥–µ–æ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–º, –ø—Ä–∏ —ç—Ç–æ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—Ü–∞—Ö.

**–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ù–∞–ª–æ–∂–µ–Ω–∏—è:**

\[
(x_{\text{offset}}, y_{\text{offset}}) = (\text{width} - 120, 10 + 110 \times \text{idx})
\]

–ì–¥–µ:
- \( \text{idx} \) = –ò–Ω–¥–µ–∫—Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –ª–∏—Ü–∞

## 8. **–ó–∞–≥—Ä—É–∑–∫–∞ –°–ø—Ä–∞–≤–æ—á–Ω—ã—Ö –û–±—ä–µ–∫—Ç–æ–≤ (`load_reference_objects`)**

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –≠—Ç–∏ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ª—É–∂–∞—Ç –±–∞–∑–æ–π –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤, –ø–æ–∑–≤–æ–ª—è—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –≤ –∫–∞–¥—Ä–∞—Ö –≤–∏–¥–µ–æ. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —Ç–∞–∫–∏—Ö –∑–∞–¥–∞—á, –∫–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤.

**–ó–∞–≥—Ä—É–∑–∫–∞ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**

\[
\text{ref\_objects}[ \text{class\_name.lower()} ] = \text{cv2.imread}(\text{file\_path})
\]

## 9. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –û–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –ö–∞–¥—Ä–µ (`detect_objects_on_frame`)**

–ò—Å–ø–æ–ª—å–∑—É—è –º–æ–¥–µ–ª—å YOLOv5, —Ñ—É–Ω–∫—Ü–∏—è `detect_objects_on_frame` –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã –≤ –∫–∞–∂–¥–æ–º –∫–∞–¥—Ä–µ –≤–∏–¥–µ–æ. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ YOLOv5 –ø–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—é –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏—Ö —Ä–∞–º–æ–∫ –¥–ª—è —Ç–æ—á–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏.

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ YOLOv5:**

YOLOv5 –¥–µ–ª–∏—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ç–∫—É –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏–µ —Ä–∞–º–∫–∏ –∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏.

**–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏—Ö –†–∞–º–æ–∫:**

\[
(x, y, w, h, \text{confidence}, \text{class\_scores})
\]

–ì–¥–µ:
- \( x, y \) = –¶–µ–Ω—Ç—Ä–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- \( w, h \) = –®–∏—Ä–∏–Ω–∞ –∏ –≤—ã—Å–æ—Ç–∞
- \( \text{confidence} \) = –û—Ü–µ–Ω–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞
- \( \text{class\_scores} \) = –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞

## 10. **–†–∞–∑–º–µ—â–µ–Ω–∏–µ –°–ø—Ä–∞–≤–æ—á–Ω—ã—Ö –û–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –ö–∞–¥—Ä–µ (`place_reference_objects`)**

–ü–æ—Ö–æ–∂–∏–º –æ–±—Ä–∞–∑–æ–º –Ω–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–∏—Ü, —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –≤–∏–¥–µ–æ–∫–∞–¥—Ä. –ü—É—Ç—ë–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ç–∏—Ö —Å–ø—Ä–∞–≤–æ—á–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –æ–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á—ë—Ç–∫–æ–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–≥–æ –≤–∏–¥–µ–æ, –ø–æ–≤—ã—à–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

**–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ù–∞–ª–æ–∂–µ–Ω–∏—è:**

\[
(x_{\text{offset}}, y_{\text{offset}}) = (20, 10 + 110 \times \text{idx})
\]

–ì–¥–µ:
- \( \text{idx} \) = –ò–Ω–¥–µ–∫—Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞

## 11. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –í–∏–¥–µ–æ (`process_video`)**

–§—É–Ω–∫—Ü–∏—è `process_video` –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ. –û–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–æ–∑, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∫ –∫–∞–∂–¥–æ–º—É –∫–∞–¥—Ä—É –≤—Ö–æ–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ. –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∫–∞–¥—Ä—ã –∑–∞—Ç–µ–º –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –≤ –∏—Ç–æ–≥–æ–≤–æ–µ –≤—ã—Ö–æ–¥–Ω–æ–µ –≤–∏–¥–µ–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ –Ω–∞–ª–æ–∂–µ–Ω–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ü–µ–ª–æ—Å—Ç–Ω—ã–π –∏ –æ–±–æ–≥–∞—â—ë–Ω–Ω—ã–π –æ–ø—ã—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.

**–≠—Ç–∞–ø—ã –†–∞–±–æ—á–µ–≥–æ –ü—Ä–æ—Ü–µ—Å—Å–∞:**
1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ö–∞–¥—Ä–æ–≤:** –ß—Ç–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤ –∏–∑ –≤—Ö–æ–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ —Å –ø–æ–º–æ—â—å—é `cv2.VideoCapture`.
2. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –§—É–Ω–∫—Ü–∏–π:** –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∫ –∫–∞–∂–¥–æ–º—É –∫–∞–¥—Ä—É.
3. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è –ö–∞–¥—Ä–æ–≤:** –ó–∞–ø–∏—Å—å –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤ –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –≤–∏–¥–µ–æ—Ñ–∞–π–ª —Å –ø–æ–º–æ—â—å—é `cv2.VideoWriter`.

**–¶–∏–∫–ª –û–±—Ä–∞–±–æ—Ç–∫–∏ –ö–∞–¥—Ä–æ–≤:**

\[
\text{for each frame in video:}
\]
\[
\quad \text{detect\_and\_capture\_faces(frame)}
\]
\[
\quad \text{detect\_pose\_on\_frame(frame, pose)}
\]
\[
\quad \text{add\_subtitles(frame, segments, current\_time)}
\]
\[
\quad \text{detect\_objects\_on\_frame(frame)}
\]
\[
\quad \text{save\_faces(face\_images, output\_dir, frame\_count)}
\]
\[
\quad \text{place\_detected\_faces(frame, face\_images, width, height)}
\]
\[
\quad \text{place\_reference\_objects(frame, matched\_objects, width, height)}
\]
\[
\quad \text{write\_frame\_to\_output(frame)}
\]

## 12. **–ì–ª–∞–≤–Ω–∞—è –§—É–Ω–∫—Ü–∏—è (`main`)**

–°–ª—É–∂–∞—â–∞—è —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞, —Ñ—É–Ω–∫—Ü–∏—è `main` —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—â–µ–π —Ä–∞–±–æ—Ç–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è OptiVerse. –û–Ω–∞ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –∞—É–¥–∏–æ, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ, –æ–Ω–∞ –≤–∫–ª—é—á–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç—Ç–∞–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª—é–±—ã—Ö –≤–æ–∑–Ω–∏–∫—à–∏—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø–ª–∞–≤–Ω—É—é –∏ –Ω–∞–¥—ë–∂–Ω—É—é —Ä–∞–±–æ—Ç—É.

**–ü–æ—Ç–æ–∫ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ê—É–¥–∏–æ:** –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `extract_audio` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞—É–¥–∏–æ–¥–æ—Ä–æ–∂–∫–∏.
2. **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:** –ü–µ—Ä–µ–¥–∞—á–∞ –∏–∑–≤–ª–µ—á—ë–Ω–Ω–æ–≥–æ –∞—É–¥–∏–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é `transcribe_audio` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–µ–∫—Å—Ç.
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –°—É–±—Ç–∏—Ç—Ä–æ–≤:** –ó–∞–ø–∏—Å—å —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –≤ —Ñ–∞–π–ª `subtitles.txt`.
4. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ü–æ–∑—ã:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è Pose –æ—Ç MediaPipe.
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –í–∏–¥–µ–æ:** –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `process_video` —Å –ø—É—Ç–µ–º –∫ –≤–∏–¥–µ–æ, —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –∏ –æ–±—ä–µ–∫—Ç–æ–º –ø–æ–∑—ã.
6. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ó–∞–ø–∏—Å—å —Å—Ç–∞—Ç—É—Å–∞ –∏ –ª—é–±—ã—Ö –æ—à–∏–±–æ–∫, –≤–æ–∑–Ω–∏–∫—à–∏—Ö –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫:**

```python
try:
    perform processing steps
except Exception as e:
    log the error message
```
